{% extends 'dashboard-base.html' %}

{% block title %}
    <h1 class="title text-right">کاربران</h1> 
{% endblock %}

{% block admin_content %}
<div style="direction: rtl; text-align: right; padding: 0 20px;">
  <table class="table table-dark table-striped text-right">
      <a href="{% url 'dashboard:user_create' %}" class="btn btn-primary">افزودن کاربر</a>

    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">نام و نام خانوادگی</th>
        <th scope="col">شماره تلفن</th>
        <th scope="col">ایمیل</th>
        <th scope="col">نقش</th>
        <th scope="col">ادمین است ؟</th>
        <th scope="col">مدیر  است ؟</th>
        <th scope="col">وضعیت</th>
        <th scope="col">تاریخ ایجاد</th>
        
 
      </tr>
    </thead>
    <tbody>
    {% for user in users %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        {% if user == request.user %}
        <td style="color: blue;">{{ user.full_name }} (شما)</td>
      ‌  {% else %}
        <td>{{ user.full_name }}</td>
        {% endif %}
        <td>{{ user.phone_number }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        {% if user.is_admin %}
          <td style="color:green;">✔</td>
        {% else %}
          <td style="color:red;">✖</td>
        {% endif %}
        {% if user.is_superuser %}
          <td style="color:green;">✔</td>
        {% else %}
          <td style="color:red;">✖</td>
        {% endif %}
        {% if user.is_active %}
          <td style="color:green;">فعال</td>
        {% else %}
          <td style="color:red;">غیر فعال</td>
        {% endif %}
            <td>{{ user.created }}</td>

       {% if user != request.user %}
        <td><a href="{% url 'dashboard:user_delete'  user.pk %}" class="btn btn-danger">حذف</a></td>
        <td><a href="{% url 'dashboard:user_update' user.pk %}" class="btn btn-warning">ویرایش</a></td>
      {% endif %}

      </tr>
    {% endfor %}
    </tbody>
  </table>

</div>
{% endblock %}